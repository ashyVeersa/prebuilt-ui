<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home | DuPage Medical Group is now Duly Health and Care</title>
    <script src="https://sandbox.web.squarecdn.com/v1/square.js"></script>

    <link href="http://fonts.cdnfonts.com/css/nexa-bold" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="page2.css" />
</head>


<body>
    <div class="purple-pattern-container"></div>
    <div class="header">
        <a href="/" class="header-mobile">
        <img src="./Header.jpeg" class='main-logo' alt="logo">  </a>
        <a href="/" class="header-link">
          <img src="https://vzn-dmg-prdb-dist-cdn.azureedge.net/img/duly-logo-transitional.svg" width="130">
        </a>
        <img class="center-image" src="1.PNG" height="110" />
        <div class="right-side">
          <div class="search-icon">
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-secondary dropdown-toggle" id="dropdownMenuButton" aria-haspopup="true"
              aria-expanded="false">
              <div class="btn-div">
                <span class="heart"></span>
                <span class="btn-text">Get Care</span>
                <span class="bottom-arrow">
                  < </span>
              </div>
            </button>
            <div class="dropdown-menu dropdown-menu-right"  id="drop">
              <div class="dropdown-item not-last">
                <div class="drop-header"><span>Schedule An Appointment</span></div>
                <div class="drop-text">Schedule an appointment with a provider now.</div>
              </div>
              <div class="dropdown-item not-last">
                <div class="drop-header">Next Available Video Visits</div>
                <div class="drop-text">Speak with a provider, virtually, from the comfort of<br />your home or
                  office.</div>
              </div>
              <a href="page2.html">
                <div class="dropdown-item">
                  <div class="drop-header">Duly Now Video Consult <span class="highlight-text">4 Physicians Available</span>
                  </div>
                  <div class="drop-text">
                    Start an instant Video Consultation
    
                  </div>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
    <div class="header-bottom">
        <span class="material-icons" style="margin-top: 7px;
        padding: 0 0 0 10px;">notifications</span>
        <span style="padding: 0 10px 0 2px;margin-top: 10px;"
        class="text">Coronavirus (Covid-19) Testing and Vaccine
            Updates&nbsp;&nbsp;-&nbsp;&nbsp;View More</span>
    </div>
    <div class="steps">
        <div class="back-arrow">
            <span>
                < </span>
        </div>
        <svg id="step1Icon" class="step stepactive" viewBox="0 0 1550 250">
            <path stroke-width="5" d="M25,5L1450,5L1545, 125L1450, 245L25,245Q5,245 5, 225L5,25Q5,5 25,5Z"></path>
            <text x="150" y="150" class="stepDesc" style="font-size:65px;">Step 1</text>
        </svg>
        <svg id="step2Icon" class="step stepactive" viewBox="0 0 1550 250">
            <path stroke-width="5" d="M5,5  L1450,5  L1545,125  L1450,245 L5,245 L100,125 L5,5"></path>
            <text x="150" y="150" class="stepDesc" style="font-size:65px;">Step 2</text>
        </svg>
        <svg id="step4Icon" class="step" viewBox="0 0 1550 250">
            <path stroke-width="5" d="M5,5L1525,5Q1545,5 1545,25L1545,225Q1545,245 1525,245L5,245L100,125L5,5Z"></path>
            <text x="150" y="150" class="stepDesc" style="font-size:65px;">Done!</text>
        </svg>
    </div>
    <div class="steps-mobile">
        
       
        <svg id="step1Icon" class="step stepactive" viewBox="0 0 900 400">
            <path stroke-width="10" d="M25,10L800,10L890,200L800,390L25,390Q10,390 10,375L10,25Q10,10 25,10Z"></path>
            <text x="220" y="250" class="stepDesc" style="font-size:125px;">Step 1</text>
        </svg>
       
        <svg id="step2Icon" class="step" viewBox="0 0 900 400">
            <path stroke-width="10" d="M10,10L800,10L890,200L800,390L10,390L90,200L10,10Z"></path>
            <text x="220" y="250" class="stepDesc" style="font-size:125px;">Step 2</text>
        </svg>
        
        <svg id="step4Icon" class="step" viewBox="0 0 900 400">
            <path stroke-width="10" d="M10,10L875,10Q890,10 890,25L890,375Q890,390 875,390L10,390L90,200L10,10Z"></path>
            <text x="220" y="250" class="stepDesc" style="font-size:125px;">Done!</text>
        </svg>
    </div> 
    <div class="centered">
        <div class="div-1">
            <div class="inner-div">
                <div class="subheading" style="margin-bottom: 23px;">Reason For Visit</div>
                <div style="padding-bottom: 12px;">
                    <select name="reasons" id="reasons" 
                   
                    required style=" width: 100%;">
                        <option class="normal-text  options" value="" disabled selected style="display: none;">Condition*
                        </option>
                        <option class="normal-text options" value="Condition1">Allergy</option>
                        <option class="normal-text options" value="Condition2">Back Pain</option>
                        <option class="normal-text options" value="Condition3">Cold</option>
                        <option class="normal-text options" value="Condition3">Cough</option>
                        <option class="normal-text options" value="Condition3">Ear Pain</option>
                        <option class="normal-text options" value="Condition3">Fever</option>
                    </select>
                </div>
            </div>
            <hr />
            <div class="inner-div">
                <div class="subheading">Provide Patient Info</div>
                <div style="margin: 0 auto;">
                    <form action="/action_page.php">
                        <div class="input-div">
                            <input class="normal-text" type="text" id="fname" name="fname" placeholder="First Name*"
                                value="Kevin"><br>
                            <input class="normal-text" type="text" id="lname" name="lname" placeholder="Last Name*"
                                value="Goldsmith"><br>
                        </div>
                        <div class="gender-dob-section">
                            <select name="sex" id="sex" required style="width:323px">
                                <option class="normal-text options" disabled selected style="display: none;">Legal
                                    Sex*
                                </option>
                                <option class="normal-text options" value="Male" selected>Male</option>
                                <option class="normal-text options" value="Female">Female</option>
                            </select>
                            <div class="dob-section">
                            <div class="normal-text" ">Date of Birth <span
                                    style="color:red">*</span></div>
                            <div class="dob-div">
                                <input class="normal-text" type="text" id="Month" name="Month" placeholder="MM"
                                    value="21"><br>
                                <input class="normal-text" type="text" id="Day" name="Day" placeholder="DD"
                                    value="10"><br>
                                <input class="normal-text last-dob-input" type="text" id="Year" name="Year" placeholder="YY"
                                    value="1989"><br>
                            </div>
                        </div>
                        </div>
                    </form>
                </div>
            </div>
            <hr />
            <div class="inner-div">
                <div class="subheading" style="margin-top: 36px;">Patient Contact Information</div>
                <div class="input-div" style="margin-bottom: 0;">
                    <input class="normal-text" type="text" id="phone" name="phone" placeholder="Primary Phone Number*"
                        value="260-705-2878"><br>
                    <input class="normal-text" type="text" id="email" name="email" placeholder="Email Address*"
                        value="kevin.goldsmith@gamil.com "><br>
                </div>
                <div class="input-div" style="margin-bottom: 0;">
                    <input class="normal-text" type="text" id="address" name="address" placeholder="Address*"
                        value="3892 Oak Brook"><br>
                </div>
                <div class="input-div" style="margin-bottom: 31px;">
                    <input class="normal-text" type="text" id="City" name="City" placeholder="City*"
                        value="Chicago"><br>
                    <input class="normal-text" type="text" id="State" name="State" placeholder="State*" value="IL"><br>
                    <input class="normal-text" type="text" id="Zip" name="Zip" placeholder="Zip*" value="60523"><br>
                </div>
            </div>
            <hr />
            <div class="inner-div">
                <div class="subheading" style="margin-bottom: 27px;">Are you scheduling this visit for:<span
                        style="color: red;">*</span></div>
                <div class="scheduling-visit">
                    <div style="display: flex;column-gap: 13px;">
                        <input type="radio" id="myself" name="visit_for" value="myself" checked>
                        <label class="normal-text" for="myself">Myself</label>
                    </div>
                    <div style="display: flex;column-gap: 13px;">
                        <input type="radio" id="child" name="visit_for" value="else">
                        <label class="normal-text" for="else">Someone Else</label>
                    </div>
                </div>
            </div>
            <hr />
            <div class="inner-div" style="margin-bottom: 33px;">
                <div class="subheading" style="margin-bottom: 15px;">Payment Information</div>
                <div class="normal-text" style="font-weight: 900;color: #002855;">Amount : $35</div>
                <form id="payment-form">
                    <div id="card-container"></div>
                    <!-- <button id="card-button" type="button">Pay</button> -->
                </form>
                <!-- <div style="width: 715px;margin: 0 auto;">
                    <div class="input-div" style="column-gap: 21px;">
                        <input class="normal-text" type="text" id="cardno" name="cardno" style="width: 320px;"
                            placeholder="Card Number*">
                        <input class="normal-text" type="text" id="expiry" name="expiry"  style="width:223px;" placeholder="Expiry Date (mm/yy)*">
                        <input class="normal-text" type="text" id="cvv" name="cvv"  style="width:137px;" placeholder="CVV*">
                        <input class="normal-text" type="text" id="zip2" name="zip2"  style="width:137px;" placeholder="Zip">
                    </div>
                </div> -->
            </div>
            <hr />
            <div class="inner-div">
                <div class="subheading" style="margin-bottom: 24px;">Confirm Location<span style="color:red">*</span>
                </div>
                <div style="display: flex;column-gap: 10px;">
                    <div>
                        <input type="checkbox" id="ill" name="ill" value="ill" class="check-input">
                    </div>
                    <label for="ill" class="normal-text">I confirm that I am physically in state of
                        lllinois.</label><br>
                </div>
                <div class="normal-text" style="margin-left: 25px;"><strong>If you are not physically in the state of
                        lllinois at the time of your visit,please call
                        <br /><span style="color: #470a68;">1-888-693-6437</span> to speak with a team member.
                    </strong></div>
            </div>
            <hr />
            <div class="inner-div" style="margin-bottom: 90px;">
                <div class="subheading" style="margin-bottom: 24px;">Notice of Privacy Practices<span
                        style="color:red">*</span></div>
                <div style="display: flex;column-gap: 10px;">
                    <div>
                        <input type="checkbox" id="ill" name="ill" value="ill" class="check-input">
                    </div>
                    <label for="ill" class="normal-text">Under the Health Insurance Portability & Accountability Act of
                        1996 (HIPAA),
                        I understand my rights to privacy regarding my protected health information (PHI) and how it
                        will be used to plan
                        and deliver treatment, obtain payment and conduct normal healthcare operations. I acknowledge
                        that I have been
                        given the opportunity to read the Notice of Privacy Practices here.</label>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <button class="start-btn" id="next-btn">
            Pay and Start Video Consult
        </button>
    </div>
    <script>
        document.getElementById('dropdownMenuButton').addEventListener('click', () => {
            if (document.getElementById("drop").classList.contains('show')) {
                document.getElementById("drop").classList.remove('show');
            }
            else {
                document.getElementById("drop").classList.add('show');
            }
        })

        function checkInputs() {
            var isValid = true;
            var inputs = document.querySelectorAll("input[type=text]");
            for (let i = 0; i < inputs.length; i++) {
                if (inputs[i].value === "" & inputs[i].name !== 'zip2') {
                    isValid = false;
                }
            }
            var inputs = document.querySelectorAll("select");
            for (let i = 0; i < inputs.length; i++) {
                if (inputs[i].value === "") {
                    isValid = false;
                }
            }
            inputs = document.querySelectorAll(".check-input");
            for (let i = 0; i < inputs.length; i++) {
                if (!inputs[i].checked) {
                    isValid = false;
                }
            }
            if (isValid) {
                document.getElementById('next-btn').classList.add('btn-active');
            }
            else {
                document.getElementById('next-btn').classList.remove('btn-active');
            }
            return isValid;
        }

        document.querySelectorAll('input').forEach((inp) => {
            inp.addEventListener('input', checkInputs);
        });

        document.querySelectorAll('select').forEach((inp) => {
            inp.addEventListener('change', checkInputs);
        });


        const APPLICATION_ID = 'sandbox-sq0idb-GbaS8M85y9qpI36ATHtPWA';
        const LOCATION_ID = 'L877QJMHRDAG8';

        async function createPayment(token) {
            const body = JSON.stringify({
                // locationId: LOCATION_ID,
                // sourceId: 'cnon:card-nonce-ok',
                idempotency_key: token,
                amount: 35,
                // amount_money: {
                //     amount: 1000,
                //     currency: "USD"
                // },
            });

            // const paymentResponse = await fetch('https://connect.squareupsandbox.com/v2/payments', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json',
            //         'Square-Version': '2022-03-16',
            //         'Authorization': 'Bearer EAAAEHAzkiHOmh8HmdW7PRzfAs5BMqi8-6ctCoR8KOrPZ_6A2e9q_AtguBv-0trt',
            //     },
            //     body,
            // });

            const paymentResponse = await fetch(`https://createpayment20220408170659.azurewebsites.net/35/${token}/Payment`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                }
            });

            if (paymentResponse.ok) {
                return paymentResponse.json();
            }
            const errorBody = await paymentResponse.text();
            throw new Error(errorBody);
        }

        const darkModeCardStyle = {
            '.input-container': {
                borderColor: 'transparent',
                borderRadius: '0px',
            },
            '.input-container.is-focus': {
                borderColor: 'transparent',
            },
            '.input-container.is-error': {
                borderColor: '#ff1600',
            },
            '.message-text': {
                color: '#999999',
            },
            '.message-icon': {
                color: '#999999',
            },
            '.message-text.is-error': {
                color: '#ff1600',
            },
            '.message-icon.is-error': {
                color: '#ff1600',
            },
            input: {
                backgroundColor: '#f5f5f5',
                color: '#525757',
            },
            'input::placeholder': {
                color: '#525757',
            },
            'input.is-error': {
                color: '#ff1600',
            },
            '@media screen and (max-width: 600px)': {
                'input': {
                    'fontSize': '12px',
                }
            }
        };


        async function main() {
            const payments = Square.payments(APPLICATION_ID, LOCATION_ID);
            const card = await payments.card({ style: darkModeCardStyle });
            await card.attach('#card-container');

            async function eventHandler(event) {
                // event.preventDefault();
                try {
                    const result = await card.tokenize();
                    const _token = result.token

                    if (result.status === 'OK') {
                        const paymentResults = await createPayment(_token);
                        console.log('Payment Success', paymentResults);
                        setLocalStorage()
                        window.location.href = "/daily.html";
                    }

                } catch (e) {
                    console.error(e);
                }
            };

            function onFormSubmit() {
                const valid = checkInputs()

                if (valid) {
                    eventHandler()
                } else {
                    console.log('checkInputs error');
                }
            }

            const cardButton = document.getElementById('next-btn');
            cardButton.addEventListener('click', onFormSubmit);
        }

        function setLocalStorage() {
            const firstName = document.getElementById('fname').value
            const lastName = document.getElementById('lname').value

            const userData = {
                firstName,
                lastName
            }

            localStorage.setItem('userData', JSON.stringify(userData))
        }

        main();
    </script>
</body>

</html>